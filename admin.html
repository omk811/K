<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… | Ø§Ù„Ø£Ø³ØªØ§Ø° Ø®Ù„ÙŠÙ„ Ø§Ù„Ø¨Ù„ÙˆØ´ÙŠ</title>

<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;900&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box}
body{
  font-family:"Cairo",sans-serif;
  background:#020617;
  color:#e5e7eb;
  padding:20px;
}
.container{max-width:1100px;margin:auto}

.btn{
  padding:12px 18px;
  border-radius:12px;
  border:none;
  cursor:pointer;
  font-weight:700;
}
.btn-primary{background:#3b82f6;color:#fff}
.btn-success{background:#22c55e;color:#022c22}
.btn-danger{background:#ef4444;color:#fff}

.login-card{
  max-width:420px;
  margin:120px auto;
  background:#0f172a;
  padding:40px;
  border-radius:22px;
  text-align:center;
}

input,select{
  width:100%;
  padding:14px;
  margin-bottom:12px;
  border-radius:12px;
  border:1px solid rgba(255,255,255,.1);
  background:#020617;
  color:#fff;
}

.hidden{display:none}

.panel-header{
  background:#0f172a;
  padding:30px;
  border-radius:22px;
  margin-bottom:25px;
  text-align:center;
  position:relative;
}

.icon{
  position:absolute;
  top:20px;
  width:42px;
  height:42px;
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
}

.home{right:20px;background:#3b82f6}
.refresh{left:20px;background:#22c55e}

.card{
  background:#0f172a;
  border-radius:18px;
  padding:25px;
  margin-bottom:25px;
}

.lesson{
  background:#020617;
  border-radius:14px;
  padding:18px;
  margin-bottom:12px;
  border:1px solid rgba(255,255,255,.08);
}
.actions{display:flex;gap:8px}
</style>
</head>

<body>
<div class="container">

<div id="loginBox" class="login-card">
  <h2>ğŸ” Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h2>
  <input id="pass" type="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
  <button class="btn btn-primary" onclick="login()">Ø¯Ø®ÙˆÙ„</button>
  <div id="loginMsg"></div>
</div>

<div id="panel" class="hidden">
  <div class="panel-header">
    <div class="icon home" onclick="goHome()">ğŸ </div>
    <div class="icon refresh" onclick="load()">ğŸ”„</div>
    <h2>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¯Ø±ÙˆØ³</h2>
    <p style="opacity:.7">Ø¥Ø¶Ø§ÙØ© ÙˆØªØ¹Ø¯ÙŠÙ„ ÙˆØªÙ†Ø¸ÙŠÙ… Ø§Ù„Ù…Ø­ØªÙˆÙ‰</p>
  </div>

  <div class="card">
    <h3>â• Ø¥Ø¶Ø§ÙØ© Ø¯Ø±Ø³</h3>
    <input id="title" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¯Ø±Ø³">
    <input id="url" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„Ø¯Ø±Ø³">
    <input id="author" value="Ø§Ù„Ø£Ø³ØªØ§Ø° Ø®Ù„ÙŠÙ„ Ø§Ù„Ø¨Ù„ÙˆØ´ÙŠ">
    <select id="semester">
      <option value="1">Ø§Ù„ÙØµÙ„ Ø§Ù„Ø£ÙˆÙ„</option>
      <option value="2">Ø§Ù„ÙØµÙ„ Ø§Ù„Ø«Ø§Ù†ÙŠ</option>
    </select>
    <button class="btn btn-success" onclick="add()">Ù†Ø´Ø± Ø§Ù„Ø¯Ø±Ø³</button>
  </div>

  <div class="card">
    <h3>ğŸ“‹ Ø§Ù„Ø¯Ø±ÙˆØ³</h3>
    <div id="list"></div>
  </div>
</div>

</div>

<script>
const API="https://script.google.com/macros/s/AKfycbxuf794HZmIMIjofGEunan_GRJNH6Npn_fHcZsMZShss90Z4ilPRwpQjRVUGJd2fOSqnw/exec";
let PASS="";

function login(){
  PASS=pass.value;
  fetch(API,{method:"POST",body:JSON.stringify({action:"get",password:PASS})})
  .then(r=>r.json())
  .then(d=>{
    if(d.error) loginMsg.textContent="âŒ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©";
    else{
      loginBox.classList.add("hidden");
      panel.classList.remove("hidden");
      load();
    }
  });
}

function load(){
  list.innerHTML="â³";
  fetch(API,{method:"POST",body:JSON.stringify({action:"get",password:PASS})})
  .then(r=>r.json())
  .then(data=>{
    list.innerHTML="";
    data.filter(l=>l.status!=="DELETED").forEach(l=>{
      const div=document.createElement("div");
      div.className="lesson";
      div.innerHTML=`
        <b>${l.title}</b><br>
        <small>${l.semester==="1"?"Ø§Ù„ÙØµÙ„ Ø§Ù„Ø£ÙˆÙ„":"Ø§Ù„ÙØµÙ„ Ø§Ù„Ø«Ø§Ù†ÙŠ"}</small>
        <div class="actions">
          <button class="btn btn-danger" onclick="del('${l.id}')">Ø¥Ø®ÙØ§Ø¡</button>
        </div>
      `;
      list.appendChild(div);
    });
  });
}

function add(){
  fetch(API,{method:"POST",body:JSON.stringify({
    action:"add",password:PASS,
    title:title.value,url:url.value,
    author:author.value,semester:semester.value
  })}).then(()=>{title.value="";url.value="";load();});
}

function del(id){
  if(!confirm("Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø¯Ø±Ø³ Ù…Ù† Ø§Ù„Ø·Ù„Ø§Ø¨ØŸ"))return;
  fetch(API,{method:"POST",body:JSON.stringify({
    action:"toggle",password:PASS,id:id,status:"DELETED"
  })}).then(load);
}

function goHome(){location.href="./index.html";}
</script>
</body>
</html>
