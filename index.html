<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Ø¯Ø±ÙˆØ³ Ø§Ù„ØµÙ Ø§Ù„Ø®Ø§Ù…Ø³ | Ø§Ù„Ø£Ø³ØªØ§Ø° Ø®Ù„ÙŠÙ„ Ø§Ù„Ø¨Ù„ÙˆØ´ÙŠ</title>

  <!-- Ø®Ø· -->
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">

  <style>
    body{
      margin:0;
      font-family:"Cairo", sans-serif;
      background:#0a0a14;
      color:#f1f5f9;
    }

    .container{
      max-width:900px;
      margin:auto;
      padding:20px;
    }

    /* ===== Ø±Ø£Ø³ Ø§Ù„ØµÙØ­Ø© ===== */
    .header{
      text-align:center;
      margin-bottom:30px;
    }

    h1{
      margin:0;
      color:#a78bfa;
      font-size:26px;
    }

    .top-links{
      margin-top:6px;
      font-size:14px;
      color:#cbd5e1;
    }

    .top-links a{
      color:#a78bfa;
      text-decoration:none;
      font-weight:700;
    }

    .top-links a:hover{
      text-decoration:underline;
    }

    .subtitle{
      margin-top:10px;
      color:#cbd5e1;
      font-size:15px;
    }

    /* ===== Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¯Ø±ÙˆØ³ ===== */
    ul#lessons{
      list-style:none;
      padding:0;
      margin:0;
    }

    ul#lessons li{
      margin-bottom:16px;
    }

    a.lesson-link{
      display:block;
      padding:18px;
      background:rgba(139,92,246,0.15);
      border-radius:16px;
      color:#ffffff;
      text-decoration:none;
      font-weight:700;
      transition:0.3s;
      position:relative;
    }

    a.lesson-link:hover{
      background:rgba(139,92,246,0.3);
      transform:translateY(-2px);
    }

    /* ===== ØªÙ…ÙŠÙŠØ² Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹ Ø§Ù„Ø¬Ø¯ÙŠØ¯ ===== */
    .featured{
      border:2px solid #facc15;
      background:linear-gradient(135deg, rgba(250,204,21,.15), rgba(139,92,246,.25));
    }

    .featured::before{
      content:"ğŸŒŸ Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹ Ø§Ù„Ø¬Ø¯ÙŠØ¯";
      position:absolute;
      top:-12px;
      right:16px;
      background:#facc15;
      color:#000;
      font-size:12px;
      font-weight:700;
      padding:4px 12px;
      border-radius:20px;
    }

    .lesson-meta{
      margin-top:8px;
      font-size:13px;
      color:#e5e7eb;
      font-weight:400;
    }

    /* ===== Ø²Ø± Ø§Ù„Ø£Ø¯Ù…Ù† ===== */
    .admin-btn{
      position:fixed;
      bottom:20px;
      right:20px;
      width:46px;
      height:46px;
      background:#1f2937;
      color:#e5e7eb;
      border-radius:50%;
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:20px;
      text-decoration:none;
      box-shadow:0 8px 20px rgba(0,0,0,0.4);
      opacity:0.6;
      transition:0.3s;
      z-index:100;
    }

    .admin-btn:hover{
      opacity:1;
      transform:rotate(90deg);
    }
  </style>
</head>

<body>

<div class="container">

  <!-- Ø±Ø£Ø³ Ø§Ù„ØµÙØ­Ø© -->
  <div class="header">
    <h1>ğŸ“š Ø¯Ø±ÙˆØ³ Ø§Ù„ØµÙ Ø§Ù„Ø®Ø§Ù…Ø³</h1>

    <div class="top-links">
      <a href="mailto:omk456456@gmail.com?subject=Ø§Ø³ØªÙØ³Ø§Ø±%20Ø­ÙˆÙ„%20Ø¯Ø±ÙˆØ³%20Ø§Ù„ØµÙ%20Ø§Ù„Ø®Ø§Ù…Ø³">
        Ù…Ø±Ø§Ø³Ù„Ø© Ø§Ù„Ø£Ø³ØªØ§Ø° Ø®Ù„ÙŠÙ„ Ø§Ù„Ø¨Ù„ÙˆØ´ÙŠ Ø¹Ø¨Ø± Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ
      </a>
    </div>

    <div class="subtitle">
      Ø§Ø®ØªØ± Ø§Ù„Ø¯Ø±Ø³ Ù„Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¥Ù„Ù‰ Ø§Ù„Ø´Ø±Ø­ Ù…Ø¨Ø§Ø´Ø±Ø©
    </div>
  </div>

  <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¯Ø±ÙˆØ³ -->
  <ul id="lessons">
    <li>â³ Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¯Ø±ÙˆØ³...</li>
  </ul>

</div>

<!-- Ø²Ø± Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ù„Ø£Ø¯Ù…Ù† -->
<a href="admin.html" class="admin-btn" title="Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©">âš™ï¸</a>

<script>
  /* Ø¶Ø¹ Ø±Ø§Ø¨Ø· Google Apps Script Ù‡Ù†Ø§ */
  const API_URL = "https://script.google.com/macros/s/AKfycby8xoOulob5_SSdp4w8zUZi8qMaLzU4J_-d_Ryt3veZ8eBky7Uy2iSkJLcxEJ2o0C4LfQ/exec";

  fetch(API_URL)
    .then(res => res.json())
    .then(data => {
      const list = document.getElementById("lessons");
      list.innerHTML = "";

      if (!data || data.length === 0) {
        list.innerHTML = "<li>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¯Ø±ÙˆØ³ Ù…ØªØ§Ø­Ø© Ø­Ø§Ù„ÙŠÙ‹Ø§</li>";
        return;
      }

      // ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ø´Ø± (Ø§Ù„Ø£Ø­Ø¯Ø« Ø£ÙˆÙ„Ù‹Ø§)
      data.sort((a,b)=> new Date(b.publish_date) - new Date(a.publish_date));

      data.forEach((lesson, index) => {
        list.innerHTML += `
          <li>
            <a class="lesson-link ${index === 0 ? 'featured' : ''}"
               href="${lesson.url}"
               onclick="countView('${lesson.id}')">

              ${lesson.title}

              <div class="lesson-meta">
                ${lesson.publish_date ? "ğŸ—“ï¸ " + lesson.publish_date : ""}
                ${lesson.author ? " | âœï¸ " + lesson.author : ""}
              </div>

            </a>
          </li>
        `;
      });
    })
    .catch(() => {
      document.getElementById("lessons").innerHTML =
        "<li>âŒ ØªØ¹Ø°Ù‘Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¯Ø±ÙˆØ³</li>";
    });

  function countView(id){
    fetch(API_URL,{
      method:"POST",
      body:JSON.stringify({
        action:"view",
        id:id
      })
    });
  }
</script>

</body>
</html>
