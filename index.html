<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5">
<title>Ø¯Ø±ÙˆØ³ Ø§Ù„ØµÙ Ø§Ù„Ø®Ø§Ù…Ø³ | Ø§Ù„Ø£Ø³ØªØ§Ø° Ø®Ù„ÙŠÙ„ Ø§Ù„Ø¨Ù„ÙˆØ´ÙŠ</title>
<meta name="description" content="Ù…Ù†ØµØ© Ø¯Ø±ÙˆØ³ Ø§Ù„ØµÙ Ø§Ù„Ø®Ø§Ù…Ø³ Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© - Ø§Ù„Ø£Ø³ØªØ§Ø° Ø®Ù„ÙŠÙ„ Ø§Ù„Ø¨Ù„ÙˆØ´ÙŠ">

<!-- PWA -->
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#8b5cf6">

<!-- Font -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;900&display=swap" rel="stylesheet">

<style>
:root{
--primary:#8b5cf6;
--secondary:#10b981;
--accent:#facc15;
--bg1:#0a0a14;
--bg2:#1a1a2e;
--card:rgba(30,30,46,.85);
--text:#f1f5f9;
--muted:#94a3b8;
--radius:18px;
--tr:all .3s ease;
}
*{margin:0;padding:0;box-sizing:border-box}
body{
font-family:"Cairo",sans-serif;
background:linear-gradient(135deg,var(--bg1),var(--bg2));
color:var(--text);
min-height:100vh;
overflow-x:hidden;
line-height:1.7;
}
.container{max-width:1200px;margin:auto;padding:20px;position:relative;z-index:1}
.header{text-align:center;margin-bottom:40px}
.hero-badge{
display:inline-block;
padding:10px 24px;
border-radius:50px;
background:rgba(139,92,246,.15);
border:2px solid rgba(139,92,246,.3);
font-weight:700;
margin-bottom:20px;
}
h1{
font-size:clamp(2rem,5vw,3rem);
font-weight:900;
background:linear-gradient(135deg,#a78bfa,#10b981);
-webkit-background-clip:text;
-webkit-text-fill-color:transparent;
}
.teacher-card{
display:inline-flex;
align-items:center;
gap:15px;
background:rgba(30,30,46,.7);
padding:15px 30px;
border-radius:50px;
margin:20px 0;
}
.teacher-avatar{
width:50px;height:50px;border-radius:50%;
display:flex;align-items:center;justify-content:center;
background:linear-gradient(135deg,var(--primary),var(--secondary));
font-size:22px;
}
.contact-btn{
display:inline-flex;
gap:8px;
padding:12px 28px;
border-radius:25px;
border:2px solid rgba(139,92,246,.4);
color:#a78bfa;
text-decoration:none;
margin-top:15px;
}
.stats-grid{
display:grid;
grid-template-columns:repeat(auto-fit,minmax(140px,1fr));
gap:15px;
max-width:500px;
margin:30px auto;
}
.stat-card{
background:var(--card);
padding:20px;
border-radius:15px;
text-align:center;
}
.stat-number{font-size:1.8rem;font-weight:900;color:var(--secondary)}
.section-header{
display:flex;justify-content:space-between;align-items:center;
flex-wrap:wrap;margin-bottom:25px;
}
.section-title{font-size:1.5rem;font-weight:800}
.sort-options{display:flex;gap:10px}
.sort-btn{
padding:8px 16px;
border-radius:20px;
background:var(--card);
border:1px solid rgba(139,92,246,.3);
color:var(--muted);
cursor:pointer;
}
.sort-btn.active{background:rgba(139,92,246,.25);color:#fff}
.lessons-grid{
list-style:none;
display:grid;
grid-template-columns:repeat(auto-fill,minmax(350px,1fr));
gap:20px;
}
.lesson-link{
display:block;
padding:25px;
background:var(--card);
border-radius:var(--radius);
color:#fff;
text-decoration:none;
transition:var(--tr);
}
.lesson-link:hover{transform:translateY(-5px)}
.lesson-title{font-size:1.2rem;font-weight:800}
.lesson-meta{
display:flex;gap:15px;
margin-top:15px;
font-size:.85rem;color:var(--muted)
}
.loading-state,.error-state,.empty-state{
grid-column:1/-1;
text-align:center;
padding:50px;
}
.admin-btn{
position:fixed;
bottom:25px;
left:25px;
width:55px;height:55px;
border-radius:50%;
display:flex;align-items:center;justify-content:center;
background:#1f2937;
color:#fff;
text-decoration:none;
font-size:22px;
z-index:100;
}
.footer{text-align:center;margin-top:60px;padding:30px;color:#64748b}
.ask-popup{position:fixed;inset:0;display:none;z-index:9999}
.ask-popup.show{display:block}
.ask-popup__backdrop{position:absolute;inset:0;background:rgba(0,0,0,.6)}
.ask-popup__box{
width:min(90%,420px);
margin:15vh auto;
background:#111;
color:#fff;
border-radius:16px;
padding:18px;
position:relative;
}
.ask-popup__close{
position:absolute;top:8px;left:8px;
background:none;border:none;color:#fff;font-size:22px;
cursor:pointer;
}
.ask-popup__btn{
width:100%;
margin-top:10px;
padding:10px;
border:none;
border-radius:12px;
background:#d4af37;
font-weight:800;
cursor:pointer;
}
</style>
</head>

<body>

<div class="container">
<header class="header">
<div class="hero-badge">âœ¨ ÙƒÙ„ Ù…ÙˆØ¶ÙˆØ¹Ø§Øª Ø§Ù„Ø£Ø³ØªØ§Ø° Ø®Ù„ÙŠÙ„ Ø§Ù„Ø¨Ù„ÙˆØ´ÙŠ</div>
<h1>ğŸ“š Ø£Ù†Ø´Ø·Ø© Ø§Ù„ØµÙ Ø§Ù„Ø®Ø§Ù…Ø³</h1>

<div class="teacher-card">
<div class="teacher-avatar">ğŸ‘¨â€ğŸ«</div>
<div>
<strong>Ø§Ù„Ø£Ø³ØªØ§Ø° Ø®Ù„ÙŠÙ„ Ø§Ù„Ø¨Ù„ÙˆØ´ÙŠ</strong><br>
<span style="color:#94a3b8">Ù…Ø¹Ù„Ù… Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</span>
</div>
</div>

<a class="contact-btn" href="mailto:omk456456@gmail.com">ğŸ“§ ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§</a>

<div class="stats-grid">
<div class="stat-card"><span id="totalLessons" class="stat-number">0</span><br>Ø¯Ø±Ø³</div>
<div class="stat-card"><span id="totalViews" class="stat-number">0</span><br>Ù…Ø´Ø§Ù‡Ø¯Ø©</div>
<div class="stat-card"><span id="lastUpdate" class="stat-number">-</span><br>Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«</div>
</div>
</header>

<main>
<div class="section-header">
<div class="section-title">Ø§Ù„Ø£Ù†Ø´Ø·Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©</div>
<div class="sort-options">
<button class="sort-btn active" data-sort="newest">Ø§Ù„Ø£Ø­Ø¯Ø«</button>
<button class="sort-btn" data-sort="views">Ø§Ù„Ø£ÙƒØ«Ø± Ù…Ø´Ø§Ù‡Ø¯Ø©</button>
<button class="sort-btn" data-sort="oldest">Ø§Ù„Ø£Ù‚Ø¯Ù…</button>
</div>
</div>

<ul class="lessons-grid" id="lessons">
<li class="loading-state">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„â€¦</li>
</ul>
</main>

<footer class="footer">
Â© <span id="currentYear"></span> Ø§Ù„Ø£Ø³ØªØ§Ø° Ø®Ù„ÙŠÙ„ Ø§Ù„Ø¨Ù„ÙˆØ´ÙŠ
</footer>
</div>

<a href="admin.html" class="admin-btn">âš™ï¸</a>

<!-- Popup -->
<div id="askPopup" class="ask-popup">
<div class="ask-popup__backdrop" onclick="closeAskPopup()"></div>
<div class="ask-popup__box">
<button class="ask-popup__close" onclick="closeAskPopup()">Ã—</button>
<h3>ğŸ“Œ Ù„Ù„Ø§Ø³ØªÙØ³Ø§Ø±Ø§Øª</h3>
<p>
<a href="https://omk811.github.io/K/index.html" target="_blank">ØµÙØ­Ø© Ø§Ù„Ø§Ø³ØªÙØ³Ø§Ø±Ø§Øª</a>
</p>
<button class="ask-popup__btn" onclick="closeAskPopup()">ÙÙ‡Ù…Øª</button>
</div>
</div>

<script>
const API_URL="https://script.google.com/macros/s/AKfycbx61Y4tVA1j_L2c2_3EoVQX7hb5Ysh5tbFvavj2M48ZwCmWvH78Qd5uwYtUwiV-BkD5tQ/exec";
let allLessons=[],currentSort="newest";

const lessonsEl=document.getElementById("lessons");
const totalLessonsEl=document.getElementById("totalLessons");
const totalViewsEl=document.getElementById("totalViews");
const lastUpdateEl=document.getElementById("lastUpdate");

document.getElementById("currentYear").textContent=new Date().getFullYear();

document.querySelectorAll(".sort-btn").forEach(b=>{
b.onclick=()=>{
document.querySelectorAll(".sort-btn").forEach(x=>x.classList.remove("active"));
b.classList.add("active");
currentSort=b.dataset.sort;
sortLessons();
};
});

fetch(API_URL).then(r=>r.json()).then(data=>{
allLessons=data;
updateStats();
sortLessons();
}).catch(()=>showError());

function updateStats(){
totalLessonsEl.textContent=allLessons.length;
totalViewsEl.textContent=allLessons.reduce((s,l)=>s+(+l.views||0),0);
}

function sortLessons(){
let l=[...allLessons];
if(currentSort==="views")l.sort((a,b)=>(+b.views||0)-(+a.views||0));
else if(currentSort==="oldest")l.sort((a,b)=>new Date(a.publish_date)-new Date(b.publish_date));
else l.sort((a,b)=>new Date(b.publish_date)-new Date(a.publish_date));
render(l);
}

function render(list){
lessonsEl.innerHTML="";
if(!list.length)return showEmpty();
list.forEach(i=>{
lessonsEl.innerHTML+=`
<li>
<a class="lesson-link" href="${i.url}" target="_blank">
<div class="lesson-title">${i.title}</div>
<div class="lesson-meta">
<span>ğŸ—“ ${i.publish_date||"-"}</span>
<span>ğŸ‘ ${i.views||0}</span>
</div>
</a>
</li>`;
});
}

function showError(){lessonsEl.innerHTML="<li class='error-state'>Ø­Ø¯Ø« Ø®Ø·Ø£</li>"}
function showEmpty(){lessonsEl.innerHTML="<li class='empty-state'>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¯Ø±ÙˆØ³</li>"}
function closeAskPopup(){document.getElementById("askPopup").classList.remove("show")}

setTimeout(()=>document.getElementById("askPopup").classList.add("show"),2500);

if("serviceWorker"in navigator){
navigator.serviceWorker.register("sw.js");
}
</script>

</body>
</html>
